{% extends "base.html" %}

{% block head %}
<script>
    const search_for_test_result_by_type = () => {
        const searchInputValue = document.getElementById("test_result_by_test_name_search").value;
        const parser = new URL(window.location);
        parser.searchParams.set("test_name", searchInputValue);
        window.location = parser.href;
        
    }
</script>
{% endblock %}

{% block content %}
<div class="flex justify-center flex-col items-center" style="color:white;">
    <div class="flex my-3 gap-5">
        <input style="color:black;" id="test_result_by_test_name_search" type="text" placeholder="Название теста" class="text-xl p-3">
        <button onclick="search_for_test_result_by_type()" type="button" style="background:#3E5F8A;" class="rounded-3xl p-3">
            <font size="4px">Поиск результата</font>
        </button>
    </div>
    <span>Например, AIZENKA, ELERSA</span>
    {% if details|string == "no_data" %}
        <br>
        <div  style="font-size:50px ; color:red; text-align: center;">
            Нет результатов для теста {{ results }}
        </div>
    {% else %}
        {% for result in results %}
            <div class="flex rounded-3 border-2 p-3 mt-5">
                <img width="150" src="{{ url_for('static', path='stocks_1.png') }}" alt="Стонкс" class="mr-5">
                <div class="flex flex-col">
                    <span class="text-2xl font-bold">Тест {{ result["test_name"] }}</span>
                    <span class="text-lg">ID результата: {{ result["id"] }}</span>
                    <span class="text-lg">ID теста: {{ result["test_id"] }}</span>
                    <span class="text-lg">ID пользователя: {{ result["user_id"] }}</span>
                    <span class="text-lg">Дата прохождения теста: {{ result["date"] }}</span>
                    <span class="text-lg" id="description{{loop.index0}}"> </span>
                    <script>
                        if ("{{ result["description"] }}" !== "None" ) {
                            document.getElementById('description{{loop.index0}}').innerHTML = "Описание: {{ result["description"] }}";
                        }
                    </script>
                    <span class="text-lg">Количество баллов: {{ result["result"] }}</span>
                </div>
            </div>
        {% endfor %}
    {% endif %}
</div>
{% endblock %}